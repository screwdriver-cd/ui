{{#if addCollectionError}}
  <InfoMessage
    @message={{addCollectionError}}
    @type="warning"
    @icon="exclamation-triangle"
  />
{{/if}}
{{#if addCollectionSuccess}}
  <InfoMessage
    @message={{addCollectionSuccess}}
    @type="success"
    @icon="check"
  />
{{/if}}
<div class="num-results">
  {{if
    isEmpty
    "No results"
    (concat "Showing " filteredPipelines.length " result(s)")
  }}
</div>
<table>
  <thead>
    <tr>
      <th class="appId">
        Name
      </th>
      <th class="branch">
        Branch
      </th>
      <th class="account">
        Account
      </th>
      {{#if session.isAuthenticated}}
        <th class="add">
          Add to Collection
        </th>
      {{/if}}
    </tr>
  </thead>
  <tbody>
    {{#each filteredPipelines as |pipeline|}}
      <tr>
        <td class="appId">
          {{#highlight-terms query}}
            <LinkTo @route="pipeline" @model={{pipeline.id}}>
              {{pipeline.appId}}
            </LinkTo>
          {{/highlight-terms}}
        </td>
        <td class="branch">
          <a href={{branch-url-encode pipeline.hubUrl}}>
            <FaIcon @icon="code-branch" />{{pipeline.branch}}
          </a>
        </td>
        <td class="account">
          <FaIcon @icon={{pipeline.scmIcon}} @prefix="fab" /> {{pipeline.scm}}
        </td>
        {{#if session.isAuthenticated}}
          <td class="add">
            <CollectionDropdown
              @pipeline={{pipeline}}
              @collections={{collections}}
              @addToCollection={{action "addToCollection"}}
              @addCollectionError={{addCollectionError}}
              @addCollectionSuccess={{addCollectionSuccess}}
            />
          </td>
        {{/if}}
      </tr>
    {{/each}}
  </tbody>
</table>
{{#if showMore}}
  <a class="showMore" {{action "moreClick"}}>
    Show more results...
  </a>
{{/if}}

<CollectionModal
  @showModal={{showModal}}
  @addNewCollection={{addNewCollection}}
/>