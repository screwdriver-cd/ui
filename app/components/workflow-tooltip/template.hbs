<div class="content">
  {{#if this.tooltipData.externalTrigger}}
    <LinkTo @route="pipeline" @model={{this.tooltipData.externalTrigger.pipelineId}}>
      Go to remote pipeline
    </LinkTo>
  {{else if this.tooltipData.triggers}}
    {{#each this.tooltipData.triggers as |t|}}
      <LinkTo @route="pipeline" @model={{t.pipelineId}}>
        Go to downstream pipeline {{t.triggerName}}
      </LinkTo>
    {{/each}}
  {{else}}
    {{#if this.tooltipData.job.buildId}}
      {{#if (not-eq this.tooltipData.job.status "CREATED")}}
        <LinkTo @route="pipeline.build" @model={{this.tooltipData.job.buildId}}>
          Go to build details
        </LinkTo>
      {{/if}}
    {{/if}}
    <LinkTo @route="pipeline.metrics" @query={{hash jobId=this.tooltipData.job.id}}>
      Go to build metrics
    </LinkTo>

    {{#if this.tooltipData.job.isDisabled}}
      <p>
        {{this.tooltipData.job.stateChangeMessage}}
      </p>
      <a {{action "toggleJob" this.tooltipData.job.name}}>
        Enable this job
      </a>
    {{else}}
      {{#if this.displayRestartButton}}
        {{#if this.tooltipData.job.manualStartDisabled}}
          <p>
            Disabled manually starting
          </p>
        {{else}}
          {{#if (eq this.isPrChainJob false)}}
            <a {{action this.confirmStartBuild}}>
              {{if this.tooltipData.job.status "Restart" "Start"}} pipeline from here
            </a>
          {{else}}
            {{#if (eq this.prBuildExists true)}}
              <a {{action this.confirmStartBuild}}>
                {{if
                  this.tooltipData.job.status
                  "Restart"
                  "Start"
                }} pipeline from here
              </a>
            {{/if}}
          {{/if}}
        {{/if}}
      {{/if}}
      {{#if (eq this.tooltipData.job.isDisabled false)}}
        <a {{action "toggleJob" this.tooltipData.job.name}}>
          Disable this job
        </a>
      {{/if}}
    {{/if}}

    {{#if this.tooltipData.displayStop}}
      <a {{action this.stopBuild this.tooltipData.selectedEvent this.tooltipData.job}}>
        Stop build
      </a>
    {{/if}}
    {{#if (eq this.tooltipData.job.status "FROZEN")}}
      <a {{action this.stopBuild this.tooltipData.selectedEvent this.tooltipData.job}}>
        Stop frozen build
      </a>
    {{/if}}
  {{/if}}
  {{yield}}
</div>
<JobToggleModal
  @showToggleModal={{this.showToggleModal}}
  @updateMessage={{action "updateMessage"}}
  @name={{this.toggleJobName}}
  @stateChange={{this.stateChange}}
/>